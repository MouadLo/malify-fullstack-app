(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{116:function(e,t,a){e.exports=a(241)},241:function(e,t,a){"use strict";a.r(t);var n={};a.r(n),a.d(n,"fetchUser",(function(){return g})),a.d(n,"handleToken",(function(){return w})),a.d(n,"submitProduct",(function(){return k})),a.d(n,"fetchProducts",(function(){return C})),a.d(n,"fetchProduct",(function(){return P})),a.d(n,"editProduct",(function(){return S})),a.d(n,"deleteProduct",(function(){return _}));var r=a(0),c=a.n(r),l=a(35),o=a.n(l),i=a(6),u=a(8),s=a(109),m=a(9),d=a(10),p=a(12),f=a(11),h=a(13),b=a(29),v=a(39),E=a(14),y=a.n(E),O=a(23),N=a(30),j=a.n(N),g=function(){return function(){var e=Object(O.a)(y.a.mark((function e(t){var a;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j.a.get("/api/current_user");case 2:a=e.sent,t({type:"fetch_user",payload:a.data});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},w=function(e){return function(){var t=Object(O.a)(y.a.mark((function t(a){var n;return y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,j.a.post("/api/stripe",e);case 2:n=t.sent,a({type:"fetch_user",payload:n.data});case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},k=function(e,t,a){return function(){var t=Object(O.a)(y.a.mark((function t(n){var r;return y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,j.a.post("/api/product",Object(v.a)({},e));case 2:r=t.sent,n({type:"fetch_product",payload:r.data}),a.push("/products");case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},C=function(){return function(){var e=Object(O.a)(y.a.mark((function e(t){var a;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j.a.get("/api/products");case 2:a=e.sent,t({type:"fetch_products",payload:a.data});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},P=function(e){return function(){var t=Object(O.a)(y.a.mark((function t(a){var n;return y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,j.a.get("/api/product/".concat(e));case 2:n=t.sent,a({type:"fetch_product",payload:n.data});case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},S=function(e,t,a){return function(){var n=Object(O.a)(y.a.mark((function n(r){var c;return y.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,j.a.put("/api/product/".concat(e),t);case 2:c=n.sent,r({type:"edit_product",payload:c.data}),a.push("/products");case 5:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()},_=function(e,t){return function(){var a=Object(O.a)(y.a.mark((function a(n){return y.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,j.a.delete("/api/product/".concat(e));case 2:n({type:"delete_product",payload:e}),t.push("/products");case 4:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}()},x=a(28),F=a(110),A=a.n(F),T=function(e){Object(p.a)(a,e);var t=Object(f.a)(a);function a(){return Object(m.a)(this,a),t.apply(this,arguments)}return Object(d.a)(a,[{key:"render",value:function(){var e=this;return c.a.createElement(A.a,{name:"Emaily",description:"$5 for 5 emails credits",amount:500,token:function(t){return e.props.handleToken(t)},stripeKey:"pk_test_q6FVVhZO0MgGoXXUpvHB8pXY00zvfMX4ab"},c.a.createElement("button",{className:"ui secondary button"},"Add Credits"))}}]),a}(r.Component),V=Object(i.b)(null,n)(T),D=function(e){Object(p.a)(a,e);var t=Object(f.a)(a);function a(){return Object(m.a)(this,a),t.apply(this,arguments)}return Object(d.a)(a,[{key:"renderContent",value:function(){var e;switch(this.props.auth){case null:return;case!1:return c.a.createElement("a",{className:"item",href:"/auth/google"},"Login With Google");default:return[c.a.createElement(h.b,(e={key:"0",className:"item"},Object(x.a)(e,"key","3"),Object(x.a)(e,"to","/products"),e),"Products"),c.a.createElement("div",{key:"2",style:{margin:"0 10px"},className:"orange item active"},this.props.auth.displayName," Your Credits:"," ",this.props.auth.credits),c.a.createElement(V,{key:"1",className:"item"}),c.a.createElement("a",{key:"4",className:"ui item",href:"/api/logout"},"Logout")]}}},{key:"render",value:function(){return c.a.createElement("div",{className:"ui blue inverted menu"},c.a.createElement(h.b,{to:this.props.auth?"/products":"/",className:"item active brand-logo"},"Emaily"),c.a.createElement("div",{className:"right menu"},this.renderContent()))}}]),a}(r.Component);var M=Object(i.b)((function(e){return{auth:e.auth}}))(D),B=function(){return c.a.createElement("div",{style:{textAlign:"center"}},c.a.createElement("h1",null,"Emaily!"),"Collect feedback from your users")},R=a(112),U=a.n(R),I=function(e){Object(p.a)(a,e);var t=Object(f.a)(a);function a(){return Object(m.a)(this,a),t.apply(this,arguments)}return Object(d.a)(a,[{key:"componentDidMount",value:function(){this.props.fetchProducts()}},{key:"renderProducts",value:function(){return U()(this.props.products,(function(e,t){return c.a.createElement("tr",{key:t},c.a.createElement("td",null,c.a.createElement(h.b,{to:"/products/".concat(e._id)},c.a.createElement(c.a.Fragment,null,e.title))),c.a.createElement("td",{className:"single line"},e.collections),c.a.createElement("td",null,e.price),c.a.createElement("td",null,e.tva,"%"),c.a.createElement("td",null,e.vendor))}))}},{key:"render",value:function(){return c.a.createElement("div",null,c.a.createElement("table",{className:"ui celled padded table"},c.a.createElement("thead",null,c.a.createElement("tr",null,c.a.createElement("th",{className:"single line"},"Product Title"),c.a.createElement("th",null,"Collections"),c.a.createElement("th",null,"Price"),c.a.createElement("th",null,"TVA"),c.a.createElement("th",null,"Vendor"))),c.a.createElement("tbody",null,this.renderProducts())))}}]),a}(r.Component);var L=Object(i.b)((function(e){return{products:e.products}}),{fetchProducts:C})(I),q=Object(i.b)((function(e){return{auth:e.auth}}))((function(e){return c.a.createElement("div",null,c.a.createElement(L,null),e.auth?c.a.createElement(h.b,{style:{marginTop:"30px"},className:"blue fluid ui button",to:"/products/new"},"New Product ",c.a.createElement("i",{className:"plus icon"})):c.a.createElement(c.a.Fragment,null))})),X=a(242),z=a(113),Z=a(7),G=a.n(Z),H=a(243),J=function(e){var t=e.input,a=e.label,n=e.type,r=e.meta,l=r.error,o=r.touched;return c.a.createElement(c.a.Fragment,null,c.a.createElement("label",null,a),c.a.createElement("input",Object.assign({autoComplete:"off",placeholder:a,type:n},t)),o&&l?c.a.createElement("div",{className:"ui pointing red basic label",style:{marginBottom:"1px"}},l):c.a.createElement(c.a.Fragment,null))},Y=function(e){var t=e.input,a=e.label,n=e.meta,r=n.touched,l=n.error,o=e.children;return c.a.createElement(c.a.Fragment,null,c.a.createElement("label",null,a),c.a.createElement("select",Object.assign({multiple:"",className:"ui fluid dropdown"},t),o),r&&l?c.a.createElement("div",{className:"ui pointing red basic label",style:{marginBottom:"1px"}},l):c.a.createElement(c.a.Fragment,null))},K=[{label:"Product Title",name:"title"},{label:"Price",name:"price"},{label:"TVA",name:"tva"},{label:"Collections",name:"collections"},{label:"Vendor",name:"vendor"},{label:"Bar Code",name:"barcode"}];Object(z.a)(c.a);var Q=function(e){Object(p.a)(a,e);var t=Object(f.a)(a);function a(){return Object(m.a)(this,a),t.apply(this,arguments)}return Object(d.a)(a,[{key:"renderFields",value:function(){return c.a.createElement("div",{className:"field"},c.a.createElement("div",{style:{marginRight:"50px"},className:"seven  field"},c.a.createElement("div",{className:"field"},c.a.createElement(H.a,{key:G.a.find(K,["name","title"]).name,component:J,type:"text",placeholder:"Title",label:G.a.find(K,["name","title"]).label,name:G.a.find(K,["name","title"]).name})),c.a.createElement("div",{className:"field"},c.a.createElement(H.a,{key:G.a.find(K,["name","collections"]).name,component:Y,type:"select-multi",label:G.a.find(K,["name","collections"]).label,name:G.a.find(K,["name","collections"]).name},c.a.createElement("option",null),c.a.createElement("option",{name:"AF"},"Accessories"),c.a.createElement("option",{name:"AX"},"Chairs"),c.a.createElement("option",{name:"AL"},"Shoes"),c.a.createElement("option",{name:"DZ"},"CASQUETTES"),c.a.createElement("option",{name:"AS"},"COLS MULTIFONCTIONNELS"),c.a.createElement("option",{name:"AD"},"COUSSINS"),c.a.createElement("option",{name:"AO"},"ALOHA TO ZEN"))),c.a.createElement("div",{className:"fields"},c.a.createElement("div",{className:"eight wide field"},c.a.createElement(H.a,{key:G.a.find(K,["name","price"]).name,component:J,type:"number",min:"10",max:"100",maxlength:"3",label:G.a.find(K,["name","price"]).label,name:G.a.find(K,["name","price"]).name})),c.a.createElement("div",{className:"eight wide field"},c.a.createElement(H.a,{key:G.a.find(K,["name","tva"]).name,component:J,type:"number",min:"10",max:"100",maxlength:"3",label:G.a.find(K,["name","tva"]).label,name:G.a.find(K,["name","tva"]).name}))),c.a.createElement("div",{className:"field"},c.a.createElement(H.a,{key:G.a.find(K,["name","vendor"]).name,component:J,type:"text",label:G.a.find(K,["name","vendor"]).label,name:G.a.find(K,["name","vendor"]).name})),c.a.createElement("div",{className:"field"},c.a.createElement(H.a,{key:G.a.find(K,["name","barcode"]).name,component:J,type:"text",label:G.a.find(K,["name","barcode"]).label,name:G.a.find(K,["name","barcode"]).name}))))}},{key:"render",value:function(){return c.a.createElement("div",{style:{marginTop:10,marginBottom:100}},c.a.createElement("form",{className:"ui small form",onSubmit:this.props.handleSubmit(this.props.onProductSubmit)},c.a.createElement("h4",{className:"ui dividing header"},"New Product"),this.renderFields(),c.a.createElement(h.b,{tabIndex:"0",to:"/products",className:"ui labeled icon negative button"},c.a.createElement("i",{className:"left arrow icon"}),"Cancel"),c.a.createElement("button",{type:"submit",tabIndex:"0",className:"ui labeled icon positive  button right"},"Next",c.a.createElement("i",{className:"right arrow icon"}))))}}]),a}(r.Component);var W=Object(X.a)({validate:function(e){var t={};return e.title?e.title.length>150&&(t.title="Must be 15 characters or less"):t.title="Title required",e.collections?e.collections>20&&(t.collections="Must be 20 characters or less"):t.collections="Collections required",e.supplier?e.supplier>50&&(t.supplier="Must be 20 characters or less"):t.supplier="Supplier required",e.price?isNaN(Number(e.price))&&(t.price="Must be a number"):t.price="Price required",Number(e.tva)>100&&(t.tva="TVA less than 100 %"),t},form:"productForm",destroyOnUnmount:!1})(Q),$=function(e){Object(p.a)(a,e);var t=Object(f.a)(a);function a(){var e;Object(m.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={file:null,loading:!1},e.onSubmit=function(){var t=Object(O.a)(y.a.mark((function t(a){var n,r,c;return y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a.preventDefault(),e.setState({loading:!0}),n=e.props,n.submitProduct,r=n.history,c=n.formValues,t.next=5,e.props.onSubmit(c,e.state.file,r);case 5:e.setState({loading:!1});case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e}return Object(d.a)(a,[{key:"renderFields",value:function(){var e=this.props.formValues,t=e.title,a=e.price,n=e.tva,r=(e._id,e.collections),l=e.vendor,o=e.barcode;return c.a.createElement("div",null,c.a.createElement("h5",{className:"ui horizontal divider header"},t),c.a.createElement("h4",{className:"ui horizontal divider header"},c.a.createElement("i",{className:"bar chart icon"}),"Specifications"),c.a.createElement("table",{className:"ui definition table"},c.a.createElement("tbody",null,c.a.createElement("tr",null,c.a.createElement("td",{className:"two wide column"},"Collections"),c.a.createElement("td",null,r)),c.a.createElement("tr",null,c.a.createElement("td",null,"Vendor"),c.a.createElement("td",null,l)),c.a.createElement("tr",null,c.a.createElement("td",null,"Price"),c.a.createElement("td",null,a)),c.a.createElement("tr",null,c.a.createElement("td",null,"TVA"),c.a.createElement("td",null,n)),c.a.createElement("tr",null,c.a.createElement("td",null,"Bar Code"),c.a.createElement("td",null,o)))))}},{key:"renderButtons",value:function(){var e=this.props.onCancel;return c.a.createElement("div",null,c.a.createElement("button",{className:"ui labeled icon negative button",onClick:e},c.a.createElement("i",{className:"left arrow icon"}),"Back"),this.state.loading?c.a.createElement("button",{className:"ui labeled icon positive  button right"},"Loading",c.a.createElement("i",{className:"save icon"})):c.a.createElement("button",{className:"ui labeled icon positive  button right"},"Save",c.a.createElement("i",{className:"save icon"})))}},{key:"onFileChange",value:function(e){this.setState({file:e.target.files[0]})}},{key:"render",value:function(){return c.a.createElement("form",{onSubmit:this.onSubmit},c.a.createElement("h5",null,"Please confirm your entries"),c.a.createElement("div",{className:"row",style:{marginBottom:20}},this.renderFields()),this.renderButtons())}}]),a}(r.Component);var ee=Object(i.b)((function(e){return{formValues:e.form.productForm.values}}),n)(Object(b.f)($)),te=function(e){Object(p.a)(a,e);var t=Object(f.a)(a);function a(){var e;Object(m.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={showFormReview:!1},e.onSubmit=function(t,a,n){e.props.submitProduct(t,a,n)},e}return Object(d.a)(a,[{key:"renderContent",value:function(){var e=this;return this.state.showFormReview?c.a.createElement(ee,{onSubmit:this.onSubmit,onCancel:function(){return e.setState({showFormReview:!1})}}):c.a.createElement(W,{onProductSubmit:function(){return e.setState({showFormReview:!0})}})}},{key:"render",value:function(){return c.a.createElement("div",null,this.renderContent())}}]),a}(r.Component),ae=Object(X.a)({form:"productForm"})(te),ne=Object(i.b)(null,{fetchProduct:P,submitProduct:k})(ae),re=function(e){Object(p.a)(a,e);var t=Object(f.a)(a);function a(){return Object(m.a)(this,a),t.apply(this,arguments)}return Object(d.a)(a,[{key:"componentDidMount",value:function(){this.props.fetchProduct(this.props.match.params._id)}},{key:"renderImage",value:function(){if(this.props.product.imageUrl)return c.a.createElement("img",{src:"https://s3-us-east-1.amazonaws.com/react-redux-product-sfxsd/"+this.props.product.imageUrl})}},{key:"render",value:function(){if(!this.props.product)return"";var e=this.props.product,t=e.title,a=e.price,n=e.tva,r=e._id,l=e.collections,o=e.vendor,i=e.barcode;return c.a.createElement("div",null,c.a.createElement("h5",{className:"ui horizontal divider header"},t),c.a.createElement("h4",{className:"ui horizontal divider header"},c.a.createElement("i",{className:"bar chart icon"}),"Specifications"),c.a.createElement("table",{className:"ui definition table"},c.a.createElement("tbody",null,c.a.createElement("tr",null,c.a.createElement("td",{className:"two wide column"},"Collections"),c.a.createElement("td",null,l)),c.a.createElement("tr",null,c.a.createElement("td",null,"Vendor"),c.a.createElement("td",null,o)),c.a.createElement("tr",null,c.a.createElement("td",null,"Price"),c.a.createElement("td",null,a)),c.a.createElement("tr",null,c.a.createElement("td",null,"TVA"),c.a.createElement("td",null,n)),c.a.createElement("tr",null,c.a.createElement("td",null,"Bar Code"),c.a.createElement("td",null,i)))),c.a.createElement(h.b,{tabIndex:"0",to:"/products",className:"ui labeled icon  button"},c.a.createElement("i",{className:"left arrow icon"}),"Cancel"),c.a.createElement(h.b,{style:{marginTop:"30px"},className:"ui labeled icon positive  button right",to:"/products/edit/".concat(r)},"Edit Product ",c.a.createElement("i",{className:"edit icon"})),c.a.createElement(h.b,{style:{marginTop:"30px"},className:"ui labeled icon negative button right",to:"/products/delete/".concat(r)},"Delete Product ",c.a.createElement("i",{className:"delete icon"})),this.renderImage())}}]),a}(r.Component);var ce=Object(i.b)((function(e,t){return{product:e.products[t.match.params._id]}}),{fetchProduct:P})(re),le=function(e){Object(p.a)(a,e);var t=Object(f.a)(a);function a(){var e;Object(m.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={showFormReview:!1},e.onSubmit=function(t,a,n){e.props.editProduct(e.props.match.params._id,t,n)},e}return Object(d.a)(a,[{key:"componentDidMount",value:function(){this.props.fetchProduct(this.props.match.params._id)}},{key:"renderContent",value:function(){var e=this;return this.state.showFormReview?c.a.createElement(ee,{onSubmit:this.onSubmit,onCancel:function(){return e.setState({showFormReview:!1})}}):c.a.createElement(W,{initialValues:G.a.pick(this.props.product,"title","price","collections","tva","barcode","vendor"),onProductSubmit:function(){return e.setState({showFormReview:!0})}})}},{key:"render",value:function(){return c.a.createElement("div",null,this.renderContent())}}]),a}(r.Component),oe=Object(X.a)({form:"productForm"})(le),ie=Object(i.b)((function(e,t){return{product:e.products[t.match.params._id]}}),{fetchProduct:P,editProduct:S})(oe),ue=function(e){return o.a.createPortal(c.a.createElement("div",{onClick:e.onDismiss,className:"ui dimmer modals visible active"},c.a.createElement("div",{onClick:function(e){return e.stopPropagation()},className:"ui standard modal visible active"},c.a.createElement("div",{className:"header"},e.title),c.a.createElement("div",{className:"content"},e.content),c.a.createElement("div",{className:"actions"},e.actions))),document.querySelector("#modal"))},se=function(e){Object(p.a)(a,e);var t=Object(f.a)(a);function a(){return Object(m.a)(this,a),t.apply(this,arguments)}return Object(d.a)(a,[{key:"componentDidMount",value:function(){this.props.fetchProduct(this.props.match.params._id)}},{key:"renderActions",value:function(){var e=this,t=this.props.match.params._id;return c.a.createElement(c.a.Fragment,null,c.a.createElement("button",{onClick:function(){return e.props.deleteProduct(t,e.props.history)},className:"ui button red"},"Delete"),c.a.createElement(h.b,{to:"/products/".concat(t),className:"ui button"},"Cancel"))}},{key:"renderContent",value:function(){return this.props.product?"Are you sure you want to delete this product with title:  ".concat(this.props.product.title):"Are you sure you want to delete this product "}},{key:"render",value:function(){var e=this;return c.a.createElement("div",null,c.a.createElement(ue,{title:"Delete Product",content:this.renderContent(),actions:this.renderActions(),onDismiss:function(){return e.props.history.push("/products/".concat(e.props.match.params._id))}}))}}]),a}(r.Component),me=Object(i.b)((function(e,t){return{product:e.products[t.match.params._id]}}),{fetchProduct:P,deleteProduct:_})(se),de=function(e){Object(p.a)(a,e);var t=Object(f.a)(a);function a(){return Object(m.a)(this,a),t.apply(this,arguments)}return Object(d.a)(a,[{key:"componentDidMount",value:function(){this.props.fetchUser()}},{key:"render",value:function(){return c.a.createElement("div",{className:"ui container"},c.a.createElement(h.a,null,c.a.createElement("div",null,c.a.createElement(M,null),c.a.createElement(b.c,null,c.a.createElement(b.a,{path:"/products/new",component:ne}),c.a.createElement(b.a,{path:"/products/edit/:_id",component:ie}),c.a.createElement(b.a,{path:"/products/delete/:_id",component:me}),c.a.createElement(b.a,{exact:!0,path:"/products/:_id",component:ce}),c.a.createElement(b.a,{path:"/products",component:q}),c.a.createElement(b.a,{path:"/",component:B})))))}}]),a}(r.Component),pe=Object(i.b)(null,n)(de),fe=a(244),he=a(115),be=a.n(he),ve=Object(u.c)({auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"fetch_user":return t.payload||!1;default:return e}},form:fe.a,products:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"fetch_product":var a=t.payload;return Object(v.a)({},e,Object(x.a)({},a._id,a));case"fetch_products":return Object(v.a)({},e,{},be()(t.payload,"_id"));case"edit_product":return Object(v.a)({},e,Object(x.a)({},t.payload._id,t.payload));case"delete_product":return G.a.omit(e,t.payload);default:return e}}}),Ee=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||u.d,ye=Object(u.e)(ve,Ee(Object(u.a)(s.a)));o.a.render(c.a.createElement(i.a,{store:ye},c.a.createElement(pe,null)),document.querySelector("#root"))}},[[116,1,2]]]);
//# sourceMappingURL=main.2d94e89a.chunk.js.map